# Afternet Testnet Environment Configuration
# ==========================================
# This file contains safe defaults for development.
# Create .env.local to override with your actual values (it's gitignored).
#
# Docker Compose loads .env automatically. To also load .env.local, use:
#   set -a; source .env; source .env.local 2>/dev/null; set +a; docker compose up

# =============================================================================
# Network Configuration
# =============================================================================
NET_PREFIX=fec0:3201:42:42::1/64
NET_VIA=fec0:3200::92

# =============================================================================
# Nefarious IRCd Configuration
# =============================================================================
IRCD_GENERAL_NAME=testnet.example.net
IRCD_GENERAL_DESCRIPTION=TestNet Server
IRCD_GENERAL_NUMERIC=99
IRCD_ADMIN_LOCATION=Somewhere
IRCD_ADMIN_CONTACT=admin@example.net

# IRCd Services Connect Block (for X3 services linking)
# Note: Password must match X3_UPLINK_PASSWORD
IRCD_SERVICES_CONNECT_NAME=x3.services
IRCD_SERVICES_CONNECT_HOST="*"
IRCD_SERVICES_CONNECT_PASSWORD=changeme
IRCD_SERVICES_CONNECT_PORT=4496

# =============================================================================
# X3 Services Configuration
# =============================================================================
X3_GENERAL_NAME="x3.services"
X3_GENERAL_BIND_ADDRESS="0.0.0.0"
X3_GENERAL_DESCRIPTION="Network Services"
X3_GENERAL_DOMAIN="example.net"
X3_GENERAL_NUMERIC="199"
X3_GENERAL_CONNECT_PORT="4496"
X3_GENERAL_CONNECT_PASSWORD="changeme"
X3_UPLINK_ADDRESS="nefarious"
X3_UPLINK_PORT="4496"
X3_UPLINK_PASSWORD="changeme"

# SSL/TLS for services uplink (requires X3 built with --with-ssl)
X3_UPLINK_SSL="1"
X3_UPLINK_SSL_VERIFY="0"

# =============================================================================
# LDAP Configuration (disabled by default)
# =============================================================================
X3_LDAP_ENABLE=0
X3_LDAP_URI=ldaps://ldap.example.net:636
X3_LDAP_BASE=DC=ldap,DC=example,DC=net
X3_LDAP_DN_FMT=cn=%s,ou=users,dc=example,dc=net
X3_LDAP_ADMIN_DN=cn=admin,ou=users,dc=example,dc=net
X3_LDAP_ADMIN_PASS=changeme
X3_LDAP_FIELD_ACCOUNT=cn
X3_LDAP_FIELD_PASSWORD=userPassword
X3_LDAP_FIELD_EMAIL=mail
X3_LDAP_FIELD_OSLEVEL=X3AccountLevel
X3_LDAP_FILTER=(objectClass=inetOrgPerson)

# =============================================================================
# Keycloak Configuration
# =============================================================================
# Database: dev-file uses Keycloak's built-in H2 database (no external DB needed)
# For PostgreSQL, set KC_DB=postgres and configure KC_DB_URL etc in .env.local
KC_DB=dev-file

# Keycloak hostname (override with your host IP or domain for external access)
KC_HOSTNAME=localhost

# Webhook SPI for X3 integration
KC_SPI_EVENTS_LISTENER_WEBHOOK_EVENTS_URL=http://x3:9080/keycloak-webhook
KC_SPI_EVENTS_LISTENER_WEBHOOK_EVENTS_SECRET=changeme
