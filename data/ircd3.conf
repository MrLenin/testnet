# Local server configuration for nefarious3 (hub2 server)
# This server links to the primary hub (nefarious) and acts as an intermediate hub

# Server port for incoming server connections
Port {
     port = 4496;
     server = yes;
     ssl = no;
};

# Connect block to primary hub (nefarious)
Connect {
     name = "testnet.fractalrealities.net";
     host = "172.29.0.2";
     password = "serverlink123";
     port = 4496;
     class = "Server";
     hub;
     autoconnect = yes;
};

# Connect block for leaf2 (nefarious4) - passive, leaf will connect to us
Connect {
     name = "leaf2.fractalrealities.net";
     host = "172.29.0.7";
     password = "serverlink123";
     port = 4496;
     class = "LeafServer";
};

# Connect block for X3 Services (passive - hub will forward)
Connect {
     name = "x3.services";
     host = "172.29.0.3";
     password = "abcdefg";
     port = 4496;
     class = "Server";
     autoconnect = no;
};

# Operator block
Operator {
     name = "oper";
     host = "*@*";
     password = "$PLAIN$shmoo";
     class = "Opers";
     local = no;
};

# UWorld services
UWorld {
     name = "x3.services";
     name = "testnet.fractalrealities.net";
};

# Forward commands to X3 services
Forwards {
        "." = "x3.services";
};

Pseudo "AUTH" {
	name = "authserv";
	nick = "AuthServ@x3.services";
	prepend = "AUTH ";
};

Pseudo "AUTHSERV" {
        name = "authserv";
        nick = "AuthServ@x3.services";
};

Pseudo "AS" {
        name = "authserv";
        nick = "AuthServ@x3.services";
};

Pseudo "REGISTER" {
        name = "AuthServ";
        nick = "AuthServ@x3.services";
        prepend = "REGISTER ";
};

Pseudo "X3" {
        name = "X3";
	nick = "X3@x3.services";
};

# Jupes (same as primary)
Jupe {
     nick = "X3,OperServ,NickServ,AuthServ,HelpServ,SpamServ,Global";
     nick = "O,O3,IRCop,Oper,net,_net,help";
     nick = "X2,X,W,ChanServ";
};

features {
  "LOG" = "SYSTEM" "FILE" "ircd.log";
  "LOG" = "SYSTEM" "LEVEL" "CRIT";

  "DOMAINNAME"="network";
  "RELIABLE_CLOCK"="TRUE";
  "SERVER_PORT"="4789";
  "NODEFAULTMOTD"="TRUE";
  "MOTD_BANNER"="Hub2 server - See our website for information.";
  "HUB"="TRUE";
  "RANDOM_SEED"="moo3";
  "DEFAULT_LIST_PARAM"=">4";
  "NETWORK"="Network";
  "HOST_HIDING"="TRUE";
  "HIDDEN_HOST"="Users.Network";
  "MAXCHANNELSPERUSER"="50";
  "NICKLEN" = "30";
  "MAXSILES"="25";
  "AUTH_TIMEOUT" = "8";
  "IPCHECK_CLONE_LIMIT" = "1000";
  "IPCHECK_CLONE_PERIOD" = "600";
  "IPCHECK_CLONE_DELAY" = "0";
  "LOCAL_CHANNELS" = "FALSE";
  "ANNOUNCE_INVITES" = "TRUE";
  "HIS_WHOIS_IDLETIME" = "FALSE";
  "HIS_SERVERNAME" = "*.network";
  "HIS_SERVERINFO" = "IRC Network";
  "SASL_SERVER" = "x3.services";
  "LISTDELAY" = "60";
  "NOMULTITARGETS" = "TRUE";
  "CHMODE_T" = "FALSE";
  "CHMODE_a" = "FALSE";
  "CHMODE_L" = "TRUE";
  "HALFOPS" = "TRUE";
  "EXCEPTS" = "TRUE";
  "EXTBANS" = "TRUE";
  "EXTBAN_j_MAXDEPTH" = "1";
  "EXTBAN_j_MAXPERCHAN" = "2";
  "EXTBAN_a" = "TRUE";
  "EXTBAN_c" = "TRUE";
  "EXTBAN_j" = "TRUE";
  "EXTBAN_q" = "TRUE";
  "EXTBAN_r" = "TRUE";
  "EXTBAN_m" = "TRUE";
  "EXTBAN_M" = "TRUE";
  "OPERHOST_HIDING" = "FALSE";
  "HOST_HIDING_STYLE" = "3";
  "HOST_HIDING_PREFIX" = "AN";
  "HOST_HIDING_KEY1" = "8oe8u6aoeurh4y8haoua8o.dh8,3h";
  "HOST_HIDING_KEY2" = "ttttaoeuaoeutbjbjb37462tce8ge.hgp.tc";
  "HOST_HIDING_KEY3" = "pleasent puppies pee perously prefixing pools";
  "HOST_HIDING_COMPONENTS" = "1";
  "TARGET_LIMITING" = "FALSE";
  "NOIDENT" = "TRUE";
  "LOGIN_ON_CONNECT" = "TRUE";
  "LOC_SENDHOST" = "TRUE";
  "LOC_SENDSSLFP" = "TRUE";
  "LOC_DEFAULT_SERVICE" = "AuthServ";
  "LOC_TIMEOUT" = "3";
  "URL_CLIENTS" = "http://network/";
  "CAP_tls" = "FALSE";

  # Enable draft IRCv3 capabilities
  "CAP_draft_event_playback" = "TRUE";
  "CAP_draft_message_redaction" = "TRUE";
  "CAP_draft_account_registration" = "TRUE";
  "CAP_draft_read_marker" = "TRUE";
  "CAP_draft_channel_rename" = "TRUE";
  "CAP_draft_metadata_2" = "TRUE";
  "CAP_draft_webpush" = "TRUE";

  # PM Chathistory consent settings
  "CHATHISTORY_PRIVATE" = "TRUE";

   # Bouncer
   "CAP_draft_bouncer" = "TRUE";
   "BOUNCER_ENABLE" = "TRUE";
   "BOUNCER_DEFAULT_HOLD" = "FALSE";
};
